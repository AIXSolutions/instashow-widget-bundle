var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,n,t)=>n in e?__defProp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,__spreadValues=(e,n)=>{for(var t in n||(n={}))__hasOwnProp.call(n,t)&&__defNormalProp(e,t,n[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(n))__propIsEnum.call(n,t)&&__defNormalProp(e,t,n[t]);return e},__spreadProps=(e,n)=>__defProps(e,__getOwnPropDescs(n)),__async=(e,n,t)=>new Promise((a,r)=>{var i=e=>{try{s(t.next(e))}catch(n){r(n)}},o=e=>{try{s(t.throw(e))}catch(n){r(n)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,o);s((t=t.apply(e,n)).next())});!function(e){"use strict";const n="https://api.instashow.com";const t=({isOpen:e,onClose:t,selectedDate:a,onConfirm:r,availabilityData:i,config:o,onAppointmentCreated:s})=>{const l=window.React;if(!l)return null;if(!e)return null;const[d,c]=l.useState(1),[m,g]=l.useState(a),[u,p]=l.useState(null),[h,f]=l.useState({email:"",phone:""}),[b,y]=l.useState(!1),[k,v]=l.useState({email:"",phone:""}),[w,x]=l.useState(""),[E,N]=l.useState(!1),[S,D]=l.useState(null);l.useEffect(()=>{g(a)},[a]);const _=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),T=e=>/^[\d\s()+\-]+$/.test(e)&&e.trim().length>=8;return l.createElement("div",{className:"modal-overlay",onClick:e=>{e.target===e.currentTarget&&t()}},[l.createElement("div",{key:"modal-content",className:"modal-content"},[l.createElement("button",{key:"close-button",className:"modal-close-button",onClick:t},"×"),l.createElement("div",{key:"modal-body",className:"modal-body"},[1===d&&l.createElement("div",{key:"step1",className:"step-content"},[l.createElement("h2",{key:"title",className:"modal-title"},"Schedule a visit"),l.createElement("p",{key:"subtitle",className:"modal-subtitle"},"Pick the time slot that works best for you!"),l.createElement("div",{key:"content",className:"step1-content"},[l.createElement("div",{key:"left",className:"step1-left"},[l.createElement(({selectedDate:e,onDateSelect:n,availableDates:t})=>{const[a,r]=l.useState(()=>e?new Date(e.getFullYear(),e.getMonth(),1):new Date),i=e=>{if(!t||0===t.length)return console.log("No availableDates provided to Calendar component"),!1;const n=e.toLocaleDateString("en-CA"),a=t.find(e=>{let t;t="string"==typeof e.date?new Date(e.date):e.date;return t.toLocaleDateString("en-CA")===n});return a&&a.available_slots&&a.available_slots.length>0},o=n=>!!e&&n.toDateString()===e.toDateString(),s=e=>{const n=new Date;return e.toDateString()===n.toDateString()};return l.createElement("div",{className:"calendar"},[l.createElement("div",{key:"header",className:"calendar-header"},[l.createElement("button",{key:"prev",className:"calendar-nav-button",onClick:()=>{r(e=>new Date(e.getFullYear(),e.getMonth()-1,1))}},"‹"),l.createElement("div",{key:"month-year",className:"calendar-month-year"},[l.createElement("span",{key:"month"},(d=a,d.toLocaleDateString("en-US",{month:"long"}))),l.createElement("span",{key:"year"},` ${(e=>e.getFullYear())(a)}`)]),l.createElement("button",{key:"next",className:"calendar-nav-button",onClick:()=>{r(e=>new Date(e.getFullYear(),e.getMonth()+1,1))}},"›")]),l.createElement("div",{key:"days-header",className:"calendar-days-header"},["S","M","T","W","T","F","S"].map((e,n)=>l.createElement("div",{key:`day-header-${n}`,className:"calendar-day-header"},e))),l.createElement("div",{key:"grid",className:"calendar-grid"},(()=>{const e=(t=a,new Date(t.getFullYear(),t.getMonth()+1,0).getDate());var t;const r=(e=>new Date(e.getFullYear(),e.getMonth(),1).getDay())(a),d=[];for(let n=0;n<r;n++)d.push(l.createElement("div",{key:`empty-${n}`,className:"calendar-day empty"}));for(let c=1;c<=e;c++){const e=new Date(a.getFullYear(),a.getMonth(),c),t=i(e),r=o(e);s(e);let m="calendar-day";m+=r?" selected":t?" available":" unavailable",d.push(l.createElement("div",{key:`day-${c}`,className:m,onClick:t?()=>n(e):void 0},c))}return d})())]);var d},{key:"calendar",selectedDate:m,onDateSelect:e=>{console.log("Date selected:",e),console.log("Date string (Dubai):",e.toLocaleDateString("en-CA",{timeZone:"Asia/Dubai"})),console.log("Available data:",i),g(e),p(null)},availableDates:i})]),l.createElement("div",{key:"right",className:"step1-right"},[m?l.createElement(({selectedDate:e,availableSlots:n,onTimeSlotSelect:t,selectedTimeSlot:a})=>{const r=()=>{const n=[];for(let t=9;t<21;t++){const a=e.getFullYear(),r=e.getMonth(),i=e.getDate(),o=new Date(Date.UTC(a,r,i,t-4,0,0)),s=new Date(Date.UTC(a,r,i,t-4,30,0)),l=new Date(Date.UTC(a,r,i,t-4,30,0)),d=new Date(Date.UTC(a,r,i,t-3,0,0)),c=o.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"Asia/Dubai"});s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"Asia/Dubai"});const m=l.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"Asia/Dubai"});d.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"Asia/Dubai"}),n.push({id:`slot-${t}-1`,start:o,end:s,display:c}),n.push({id:`slot-${t}-2`,start:l,end:d,display:m})}return n},i=e=>{if(!n||0===n.length)return!1;if(!n.some(n=>{const t=new Date(n.start),a=new Date(n.end),r=e.start.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),i=e.end.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),o=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),s=a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"});return r>=o&&i<=s}))return!1;const t=r(),a=t.findIndex(n=>n.id===e.id);if(-1===a)return!1;if(a+1<t.length){const e=t[a+1];if(n.some(n=>{const t=new Date(n.start),a=new Date(n.end),r=e.start.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),i=e.end.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),o=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),s=a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"});return r>=o&&i<=s}))return!0}if(a>0){const e=t[a-1];if(n.some(n=>{const t=new Date(n.start),a=new Date(n.end),r=e.start.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),i=e.end.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),o=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),s=a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"});return r>=o&&i<=s}))return!0}return!1},o=e=>e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"Asia/Dubai"}),s=r();return s.filter(i).length,l.createElement("div",{className:"time-slot-selector"},[l.createElement("div",{key:"header",className:"time-slot-header"},[l.createElement("h3",{key:"title"},"Select Time Slot")]),l.createElement("div",{key:"time-axis",className:"time-axis"},["9:00 AM","12:00 PM","3:00 PM","6:00 PM","9:00 PM"].map((e,n)=>l.createElement("div",{key:`time-${n}`,className:"time-marker"},e))),l.createElement("div",{key:"visualization",className:"time-slot-visualization"},[l.createElement("div",{key:"timeline",className:"timeline"},[s.map(e=>{const s=i(e),d=(e=>!!a&&e.id===a.id)(e)||(e=>{if(!a)return!1;const n=a.start,t=a.end;return e.start.getTime()===n.getTime()&&e.end.getTime()===t.getTime()||e.start.getTime()===n.getTime()&&e.end.getTime()===t.getTime()-18e5||e.start.getTime()===n.getTime()+18e5&&e.end.getTime()===t.getTime()})(e);let c="time-slot-segment";return c+=d?" selected":s?" available":" unavailable",l.createElement("div",{key:e.id,className:c,onClick:()=>(e=>{if(!i(e))return;const a=r(),o=a.findIndex(n=>n.id===e.id);if(-1===o)return;let s,l;if(o+1<a.length){const t=a[o+1];n.some(e=>{const n=new Date(e.start),a=new Date(e.end),r=t.start.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),i=t.end.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),o=n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),s=a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"});return r>=o&&i<=s})&&(s=e,l=t)}if(!s&&o>0){const t=a[o-1];n.some(e=>{const n=new Date(e.start),a=new Date(e.end),r=t.start.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),i=t.end.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),o=n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"}),s=a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Dubai"});return r>=o&&i<=s})&&(s=t,l=e)}if(s&&l){const e={id:`block-${s.start.getTime()}`,start:s.start,end:l.end,display:`${s.start.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"Asia/Dubai"})} - ${l.end.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"Asia/Dubai"})}`};t(e)}})(e),title:`${o(e.start)} - ${o(e.end)}`})})])]),l.createElement("div",{key:"legend",className:"time-slot-legend"},[l.createElement("div",{key:"available",className:"legend-item"},[l.createElement("div",{key:"dot",className:"legend-dot available"}),l.createElement("span",{key:"label"},"Available")]),l.createElement("div",{key:"unavailable",className:"legend-item"},[l.createElement("div",{key:"dot",className:"legend-dot unavailable"}),l.createElement("span",{key:"label"},"Unavailable")])]),a&&l.createElement("div",{key:"selected",className:"selected-time-slot"},[l.createElement("h4",{key:"title"},"You selected:"),l.createElement("div",{key:"container",className:"selected-slots-container"},[l.createElement("div",{key:"slot",className:"selected-slot-display"},[l.createElement("svg",{key:"clock",width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"clock-icon"},[l.createElement("circle",{key:"circle",cx:"12",cy:"12",r:"10"}),l.createElement("polyline",{key:"polyline",points:"12,6 12,12 16,14"})]),l.createElement("span",{key:"time"},a.display),l.createElement("button",{key:"remove",className:"remove-slot-button",onClick:()=>t(null)},"×")])])])])},{key:"time-selector",selectedDate:m,availableSlots:(()=>{if(!m||!i)return[];const e=m.toLocaleDateString("en-CA"),n=i.find(n=>{let t;t="string"==typeof n.date?new Date(n.date):n.date;return t.toLocaleDateString("en-CA")===e});return n?n.available_slots:[]})(),onTimeSlotSelect:e=>{p(e)},selectedTimeSlot:u}):l.createElement("div",{key:"no-date",className:"no-date-selected"},[l.createElement("p",{key:"message"},"Please select a date to view available time slots")])])]),l.createElement("div",{key:"navigation",className:"step-navigation"},[l.createElement("button",{key:"cancel",className:"step-button back",onClick:t},"Cancel"),l.createElement("button",{key:"next",className:"step-button next",onClick:()=>{m&&u&&c(2)},disabled:!m||!u},"Next")])]),2===d&&l.createElement("div",{key:"step2",className:"step-content"},[l.createElement("h2",{key:"title",className:"step2-title"},"Let's Connect"),l.createElement("p",{key:"subtitle",className:"step2-subtitle"},"We need your contact details to coordinate your appointment and send you all the important information."),l.createElement("div",{key:"form",className:"contact-form"},[w&&l.createElement("div",{key:"api-error",className:"api-error-message"},w),S&&l.createElement("div",{key:"existing-appointment",className:"existing-appointment-message"},[l.createElement("h4",{key:"title"},"Appointment Already Exists"),l.createElement("p",{key:"message"},"You already have an appointment scheduled for this property."),l.createElement("div",{key:"details",className:"appointment-details"},[l.createElement("div",{key:"date",className:"detail-item"},[l.createElement("span",{key:"label"},"Date: "),l.createElement("span",{key:"value"},new Date(S.start_time).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))]),l.createElement("div",{key:"time",className:"detail-item"},[l.createElement("span",{key:"label"},"Time: "),l.createElement("span",{key:"value"},`${new Date(S.start_time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} - ${new Date(S.end_time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`)]),l.createElement("div",{key:"status",className:"detail-item"},[l.createElement("span",{key:"label"},"Status: "),l.createElement("span",{key:"value"},"created"===S.status?"Awaiting Agent Confirmation":"confirmed"===S.status?"Visit Confirmed":S.status)])])]),!S&&l.createElement("div",{key:"form-fields"},[l.createElement("div",{key:"email-group",className:"form-group"},[l.createElement("div",{key:"email-label",className:"form-label"},[l.createElement("span",{key:"label"},"Email Address"),l.createElement("span",{key:"helper",className:"form-helper"},"• For calendar invites")]),l.createElement("div",{key:"email-input",className:"form-input"},[l.createElement("svg",{key:"email-icon",className:"form-input-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l.createElement("path",{key:"path",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),l.createElement("input",{key:"email-field",type:"email",placeholder:"your.email@example.com",value:h.email,onChange:e=>{const n=e.target.value;f(e=>__spreadProps(__spreadValues({},e),{email:n})),n&&_(n)&&v(e=>__spreadProps(__spreadValues({},e),{email:""}))},className:k.email?"error":""})]),k.email&&l.createElement("div",{key:"email-error",className:"form-error"},k.email)]),l.createElement("div",{key:"phone-group",className:"form-group"},[l.createElement("div",{key:"phone-label",className:"form-label"},[l.createElement("span",{key:"label"},"Phone Number"),l.createElement("span",{key:"helper",className:"form-helper"},"• Primary contact via WhatsApp")]),l.createElement("div",{key:"phone-input",className:"form-input"},[l.createElement("svg",{key:"phone-icon",className:"form-input-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l.createElement("path",{key:"path",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})]),l.createElement("input",{key:"phone-field",type:"tel",placeholder:"+971 52 9225809",value:h.phone,onChange:e=>{const n=e.target.value;f(e=>__spreadProps(__spreadValues({},e),{phone:n})),n&&T(n)&&v(e=>__spreadProps(__spreadValues({},e),{phone:""}))},className:k.phone?"error":""})]),k.phone&&l.createElement("div",{key:"phone-error",className:"form-error"},k.phone)]),l.createElement("div",{key:"security",className:"security-notice"},[l.createElement("svg",{key:"shield-icon",className:"security-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l.createElement("path",{key:"path",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})]),l.createElement("span",{key:"text",className:"security-text"},"Your information is secure and never shared with third parties")]),l.createElement("div",{key:"info",className:"info-section"},[l.createElement("div",{key:"header",className:"info-header",onClick:()=>y(!b)},[l.createElement("h3",{key:"title",className:"info-title"},"Why do we need this information?"),l.createElement("svg",{key:"toggle",className:"info-toggle "+(b?"expanded":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l.createElement("path",{key:"path",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})])]),b&&l.createElement("div",{key:"content",className:"info-content"},[l.createElement("div",{key:"item1",className:"info-item"},[l.createElement("svg",{key:"check1",className:"info-check",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l.createElement("path",{key:"path",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})]),l.createElement("span",{key:"text"},"Appointment confirmation and reminders")]),l.createElement("div",{key:"item2",className:"info-item"},[l.createElement("svg",{key:"check2",className:"info-check",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l.createElement("path",{key:"path",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})]),l.createElement("span",{key:"text"},"Quick WhatsApp communication")]),l.createElement("div",{key:"item3",className:"info-item"},[l.createElement("svg",{key:"check3",className:"info-check",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l.createElement("path",{key:"path",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})]),l.createElement("span",{key:"text"},"Calendar invites and updates")]),l.createElement("div",{key:"item4",className:"info-item"},[l.createElement("svg",{key:"check4",className:"info-check",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l.createElement("path",{key:"path",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})]),l.createElement("span",{key:"text"},"Easy rescheduling if needed")])])])])]),l.createElement("div",{key:"navigation",className:"step-navigation"},[!S&&l.createElement("button",{key:"back",className:"step-button back",onClick:()=>{c(1)}},"Back"),l.createElement("button",{key:"confirm",className:"step-button next",onClick:()=>__async(null,null,function*(){if((()=>{const e={email:"",phone:""};let n=!0;return h.email?_(h.email)||(e.email="Please enter a valid email address",n=!1):(e.email="Email is required",n=!1),h.phone?T(h.phone)||(e.phone="Please enter a valid phone number (numbers, +, -, (, ) only)",n=!1):(e.phone="Phone number is required",n=!1),v(e),n})())if(S)t();else try{N(!0),x("");const a=o["api-key"],r=o["agent-id"],i=o["agent-email"],l=o["agent-phone"],d=o["broker-id"],c=o["listing-reference"],g=o["guest-id"],p=(e,n)=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=n.start,o=n.end,s=i.toLocaleString("sv-SE",{timeZone:"Asia/Dubai"}),l=o.toLocaleString("sv-SE",{timeZone:"Asia/Dubai"});return{from:`${t}-${a}-${r} ${s.split(" ")[1]}`,to:`${t}-${a}-${r} ${l.split(" ")[1]}`}},{from:f,to:b}=p(m,u),y={agent_id:r,agent_email:i,agent_phone:l,agency_external_id:d,appointment_title:`Property Visit - ${c}`,appointment_description:`Property Visit - ${c}`,from:f,to:b,listing_reference:c,guest_email:h.email,guest_phone:h.phone};g&&""!==g.trim()&&(y.guest_id=g);const k=yield function(e,t){return __async(this,null,function*(){try{const a=yield fetch(`${n}/widget/create-appointment`,{method:"POST",headers:{"Content-Type":"application/json","X-INSTASHOW-API":e},body:JSON.stringify(t)});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return yield a.json()}catch(a){throw console.error("Error creating appointment:",a),a}})}(a,y);if(k.success)if(g&&""!==g.trim())t();else try{const e=yield function(e,t,a,r){return __async(this,null,function*(){try{const i=yield fetch(`${n}/widget/check-appointment-status`,{method:"POST",headers:{"X-INSTASHOW-API":e,"Content-Type":"application/json"},body:JSON.stringify({guest_email:t,guest_phone:a,listing_reference:r})});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return yield i.json()}catch(i){throw console.error("Error checking appointment status by contact:",i),i}})}(a,h.email,h.phone,c);e.success&&e.data&&s&&s(e.data),t()}catch(e){console.error("Error checking appointment status by contact:",e),x("Appointment created successfully! You will receive a confirmation shortly."),setTimeout(()=>{t()},2e3)}else k.message&&k.message.includes("already exists")?D(k.data):x("Something went wrong. Please try again.")}catch(a){console.error("Error creating appointment:",a),x("Something went wrong. Please try again.")}finally{N(!1)}}),disabled:!S&&(!h.email||!h.phone||E)},E?"Creating...":S?"Close":"Confirm")])])])])])},a=({config:e})=>{const a=window.React;if(!a)return"React not available";const r=e["api-key"],i=e["guest-id"],o=e["listing-reference"],s=e["agent-id"],l=e["broker-id"],[d,c]=a.useState("loading"),[m,g]=a.useState(null),[u,p]=a.useState(""),[h,f]=a.useState(null),[b,y]=a.useState(!1),[k,v]=a.useState(!1),[w,x]=a.useState(null);a.useEffect(()=>{e["guest-id"]&&""!==e["guest-id"].trim()?E():(c("schedule"),N())},[e]);const E=()=>__async(null,null,function*(){try{c("loading");const e=yield function(e,t,a){return __async(this,null,function*(){try{const r=yield fetch(`${n}/widget/appointment-status?guest_id=${t}&listing_reference=${a}`,{method:"GET",headers:{"X-INSTASHOW-API":e,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return yield r.json()}catch(r){throw console.error("Error checking appointment status:",r),r}})}(r,i,o);e.success&&e.data?"created"===e.data.status?c("awaiting"):"confirmed"===e.data.status?(g(e.data),c("confirmed")):(c("schedule"),N()):(c("schedule"),N())}catch(e){console.error("Error checking appointment status:",e),p("Unable to load appointment status. Please try again later."),c("error")}}),N=()=>__async(null,null,function*(){if(!(s&&l&&o&&r))return console.warn("Missing required parameters for agent availability API call"),f([]),void y(!1);try{y(!0);const e=yield function(e,t,a,r){return __async(this,null,function*(){try{const i=yield fetch(`${n}/widget/agent-availability?agent_id=${t}&agency_external_id=${a}&listing_reference=${r}`,{method:"GET",headers:{"X-INSTASHOW-API":e,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return yield i.json()}catch(i){throw console.error("Error fetching agent availability:",i),i}})}(r,s,l,o);if(e.success&&e.days&&e.days.length>0){const n=(e=>{if(!e||0===e.length)return[];const n=new Date,t=new Date(n.getFullYear(),n.getMonth(),n.getDate());return e.filter(e=>!(new Date(e.date)<t||!e.available_slots||0===e.available_slots.length))})(e.days);console.log("Original API response:",e.days),console.log("Filtered availability data:",n),f(n)}else f([])}catch(e){console.error("Error fetching agent availability:",e),f([])}finally{y(!1)}}),S=(e=null)=>{e?x(e):h&&h.length>0&&x(W(h[0].date)),v(!0)},D=()=>{v(!1),x(null);e["guest-id"]&&""!==e["guest-id"].trim()&&E()},_=()=>new Date,T=()=>{const e=new Date;return e.setDate(e.getDate()+1),e},A=()=>{const e=new Date;return e.setDate(e.getDate()+2),e},L=e=>e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),z=(e,n)=>`${L(e)} – ${L(n)}`,C=e=>e.toLocaleDateString("en-US",{weekday:"short"}),P=e=>{const n=e.getDate();return n<10?`0${n}`:n.toString()},M=e=>e.toLocaleDateString("en-US",{month:"short"}),W=e=>new Date(e),F=()=>{if(!h||0===h.length)return[];return h.filter(e=>e.available_slots&&e.available_slots.length>0).slice(0,3).map(e=>({date:W(e.date),availableSlots:e.available_slots}))};if("loading"===d)return a.createElement("div",{className:"widget-loading-state"},[a.createElement("div",{key:"spinner",className:"loading-spinner"},[a.createElement("div",{key:"ring",className:"spinner-ring"})]),a.createElement("p",{key:"text",className:"loading-text"},"Loading your appointment status...")]);if("error"===d)return a.createElement("div",{className:"widget-error-state"},[a.createElement("div",{key:"icon",className:"error-icon"},"⚠️"),a.createElement("h3",{key:"title",className:"error-title"},"Something went wrong"),a.createElement("p",{key:"message",className:"error-message"},u),a.createElement("button",{key:"retry",className:"error-retry-button",onClick:E},"Try Again")]);if("awaiting"===d)return a.createElement("div",{className:"widget-state awaiting-confirmation"},[a.createElement("div",{key:"header",className:"state-header awaiting"},[a.createElement("div",{key:"icon",className:"header-icon"},[a.createElement("svg",{key:"svg",width:"24",height:"24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a.createElement("path",{key:"path1",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 14v2.2l1.6 1"}),a.createElement("path",{key:"path2",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 2v4"}),a.createElement("path",{key:"path3",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"}),a.createElement("path",{key:"path4",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h5"}),a.createElement("path",{key:"path5",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 2v4"}),a.createElement("circle",{key:"circle",cx:"16",cy:"16",r:"6"})])]),a.createElement("h3",{key:"title",className:"state-title"},"Awaiting agent confirmation")]),a.createElement("div",{key:"body",className:"state-body"},[a.createElement("p",{key:"message",className:"state-message"},"We've received your request. The agent will confirm your visit shortly.")]),a.createElement("div",{key:"footer",className:"state-footer"},[a.createElement("button",{key:"action",className:"footer-action"},"See all appointments")])]);if("confirmed"===d&&m){const e=W(m.start_time),n=W(m.end_time);return a.createElement("div",{className:"widget-state visit-confirmed"},[a.createElement("div",{key:"header",className:"state-header confirmed"},[a.createElement("div",{key:"icon",className:"header-icon"},[a.createElement("svg",{key:"svg",width:"24",height:"24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a.createElement("path",{key:"path1",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),a.createElement("path",{key:"path2",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4"})])]),a.createElement("h3",{key:"title",className:"state-title"},"Visit Confirmed")]),a.createElement("div",{key:"body",className:"state-body"},[a.createElement("div",{key:"details",className:"appointment-details"},[a.createElement("div",{key:"row",className:"detail-row"},[a.createElement("div",{key:"col1",className:"detail-column"},[a.createElement("span",{key:"label1",className:"detail-label"},"Date"),a.createElement("span",{key:"value1",className:"detail-value"},(R=e,R.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})))]),a.createElement("div",{key:"col2",className:"detail-column"},[a.createElement("span",{key:"label2",className:"detail-label"},"Time"),a.createElement("span",{key:"value2",className:"detail-value"},z(e,n))])])])]),a.createElement("div",{key:"footer",className:"state-footer"},[a.createElement("button",{key:"action",className:"footer-action"},"See all appointments")])])}var R;const j=a.createElement("div",{className:"widget-state schedule-visit"},[a.createElement("div",{key:"header",className:"state-header schedule"},[a.createElement("div",{key:"icon",className:"header-icon"},[a.createElement("svg",{key:"svg",width:"24",height:"24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a.createElement("path",{key:"path",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])]),a.createElement("h3",{key:"title",className:"state-title"},"Schedule a visit")]),a.createElement("div",{key:"body",className:"state-body"},[a.createElement("div",{key:"cards",className:"date-cards"},[b?[a.createElement("div",{key:"skeleton-1",className:"date-card skeleton"},[a.createElement("div",{key:"day-skeleton1",className:"date-day"},[a.createElement("div",{key:"day-line1",className:"skeleton-line day-line"})]),a.createElement("div",{key:"number-skeleton1",className:"date-number"},[a.createElement("div",{key:"number-line1",className:"skeleton-line number-line"})]),a.createElement("div",{key:"month-skeleton1",className:"date-month"},[a.createElement("div",{key:"month-line1",className:"skeleton-line month-line"})])]),a.createElement("div",{key:"skeleton-2",className:"date-card skeleton"},[a.createElement("div",{key:"day-skeleton2",className:"date-day"},[a.createElement("div",{key:"day-line2",className:"skeleton-line day-line"})]),a.createElement("div",{key:"number-skeleton2",className:"date-number"},[a.createElement("div",{key:"number-line2",className:"skeleton-line number-line"})]),a.createElement("div",{key:"month-skeleton2",className:"date-month"},[a.createElement("div",{key:"month-line2",className:"skeleton-line month-line"})])]),a.createElement("div",{key:"skeleton-3",className:"date-card skeleton"},[a.createElement("div",{key:"day-skeleton3",className:"date-day"},[a.createElement("div",{key:"day-line3",className:"skeleton-line day-line"})]),a.createElement("div",{key:"number-skeleton3",className:"date-number"},[a.createElement("div",{key:"number-line3",className:"skeleton-line number-line"})]),a.createElement("div",{key:"month-skeleton3",className:"date-month"},[a.createElement("div",{key:"month-line3",className:"skeleton-line month-line"})])])]:[...F().map((e,n)=>a.createElement("div",{key:`date-${e.date}`,className:"date-card date-"+(0===n?"today":1===n?"tomorrow":"day-after"),onClick:()=>S(e.date)},[a.createElement("div",{key:"day",className:"date-day"},C(e.date)),a.createElement("div",{key:"number",className:"date-number"},P(e.date)),a.createElement("div",{key:"month",className:"date-month"},M(e.date))])),...0===F().length?[a.createElement("div",{key:"today",className:"date-card today"},[a.createElement("div",{key:"day1",className:"date-day"},C(_())),a.createElement("div",{key:"number1",className:"date-number"},P(_())),a.createElement("div",{key:"month1",className:"date-month"},M(_()))]),a.createElement("div",{key:"tomorrow",className:"date-card tomorrow"},[a.createElement("div",{key:"day2",className:"date-day"},C(T())),a.createElement("div",{key:"number2",className:"date-number"},P(T())),a.createElement("div",{key:"month2",className:"date-month"},M(T()))]),a.createElement("div",{key:"day-after",className:"date-card day-after"},[a.createElement("div",{key:"day3",className:"date-day"},C(A())),a.createElement("div",{key:"number3",className:"date-number"},P(A())),a.createElement("div",{key:"month3",className:"date-month"},M(A()))])]:[]]]),a.createElement("button",{key:"view-all",className:"view-all-dates-button",onClick:()=>S()},["View all available dates",a.createElement("svg",{key:"double-arrow",width:"20",height:"20",fill:"none",stroke:"#3A307F",viewBox:"0 0 24 24"},[a.createElement("path",{key:"path1",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 5l7 7-7 7"}),a.createElement("path",{key:"path2",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 5l7 7-7 7"})])])]),a.createElement("div",{key:"footer",className:"state-footer"},[a.createElement("button",{key:"action",className:"footer-action"},"See all appointments")])]);return a.createElement(a.Fragment,{},[j,a.createElement(t,{key:"modal",isOpen:k,onClose:D,selectedDate:w,onConfirm:()=>{console.log("Modal confirmed"),D()},availabilityData:h,config:e,onAppointmentCreated:e=>{"created"===e.status?c("awaiting"):"confirmed"===e.status&&(g(e),c("confirmed"))}})])},r={WIDGET_TYPE:"data-instashow-widget"},i={},o={SCHEDULER:"scheduler"};class s{static createWidget(e,n){const t=window.React;if(!t)throw new Error("React is not available globally");if(e===o.SCHEDULER)return t.createElement(a,{config:n});throw new Error(`Unsupported widget type: ${e}`)}static getSupportedWidgetTypes(){return Object.values(o)}static isWidgetTypeSupported(e){return Object.values(o).includes(e)}}function l(e){return e.shadowRoot?e.shadowRoot:e.attachShadow({mode:"closed"})}function d(e,n){const t=document.createElement("style");t.textContent=n,e.appendChild(t)}function c(e,n="instashow-widget-container"){const t=document.createElement("div");return t.className=n,e.appendChild(t),t}class m{constructor(){this.initialized=!1,this.widgets=new Map,this.styles=this.getDefaultStyles()}getReact(){if("undefined"!=typeof window&&window.React)return window.React;throw new Error("React is not available. Please ensure React is loaded.")}getReactDOM(){if("undefined"!=typeof window&&window.ReactDOM)return window.ReactDOM;throw new Error("ReactDOM is not available. Please ensure ReactDOM is loaded.")}init(){return __async(this,null,function*(){if(!this.initialized)try{yield new Promise(e=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}),yield this.waitForReact(),yield this.waitForTypes(),this.initializeWidgets(),this.setupMutationObserver(),this.initialized=!0}catch(e){console.error("Failed to initialize Widget Manager:",e)}})}waitForReact(){return __async(this,null,function*(){return new Promise((e,n)=>{const t=()=>{"undefined"!=typeof window&&window.React&&window.ReactDOM&&("function"==typeof window.ReactDOM.render||"function"==typeof window.ReactDOM.createRoot)?e():setTimeout(t,100)};t(),setTimeout(()=>{n(new Error("React and ReactDOM not available after 10 seconds"))},1e4)})})}waitForTypes(){return __async(this,null,function*(){return new Promise((e,n)=>{const t=()=>{o&&i&&Object.keys(o).length>0?e():setTimeout(t,100)};t(),setTimeout(()=>{n(new Error("Types not loaded after 5 seconds"))},5e3)})})}initializeWidgets(){document.querySelectorAll(`[${r.WIDGET_TYPE}]`).forEach(e=>{this.initializeWidget(e)})}initializeWidget(e){try{const n=e.getAttribute("data-instashow-widget");if(!n)return;if(!o||!Object.values(o).includes(n))return void this.renderErrorWidget(e,[`Unsupported widget type: ${n}`]);const t=this.validateWidgetAttributes(e,n);if(!t.isValid)return void this.renderErrorWidget(e,t.errors);const a=this.extractWidgetConfig(e);this.renderWidget(e,n,a)}catch(n){console.error("Failed to initialize widget:",n),this.renderErrorWidget(e,[n.message])}}renderWidget(e,n,t){try{const a=l(e);d(a,this.styles);const r=c(a),i=s.createWidget(n,t),o=this.getReactDOM();if("function"==typeof o.createRoot){const s=o.createRoot(r);s.render(i),this.widgets.set(e,{shadowRoot:a,container:r,root:s,widgetType:n,config:t})}else o.render(i,r),this.widgets.set(e,{shadowRoot:a,container:r,widgetType:n,config:t})}catch(a){console.error(`Failed to render widget ${n}:`,a),this.renderErrorWidget(e,[a.message])}}renderErrorWidget(e,n){try{const t=l(e);d(t,this.styles);const a=c(t),r=this.getReact(),i=this.getReactDOM(),o=r.createElement("div",{className:"instashow-widget-error"},[r.createElement("div",{key:"icon",className:"error-icon"},"⚠️"),r.createElement("div",{key:"title",className:"error-title"},"Widget Error"),r.createElement("div",{key:"message",className:"error-message"},n.join("\n")),r.createElement("div",{key:"help",className:"error-help"},"Please check your configuration and try again.")]);if("function"==typeof i.createRoot){i.createRoot(a).render(o)}else i.render(o,a)}catch(t){console.error("Failed to render error widget:",t)}}setupMutationObserver(){new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{if(e.nodeType===Node.ELEMENT_NODE){e.hasAttribute&&e.hasAttribute("data-instashow-widget")&&this.initializeWidget(e);e.querySelectorAll("[data-instashow-widget]").forEach(e=>{this.initializeWidget(e)})}})})}).observe(document.body,{childList:!0,subtree:!0})}validateWidgetAttributes(e,n){const t=[],a=[],r={scheduler:["data-api-key","data-agent-id","data-agent-email","data-agent-phone","data-broker-id","data-listing-reference"]}[n]||[];console.log("🔍 Widget Validation Debug:",{widgetType:n,requiredAttributes:r,availableAttributes:Array.from(e.attributes).map(e=>e.name)}),r.forEach(n=>{e.hasAttribute(n)&&e.getAttribute(n).trim()||a.push(n)}),a.length>0?console.error("❌ Missing required attributes:",a):console.log("✅ All required attributes present"),"undefined"!=typeof window?(void 0===window.React&&t.push("React is not loaded. Please include React script before the widget."),void 0===window.ReactDOM?t.push("ReactDOM is not loaded. Please include ReactDOM script before the widget."):"function"!=typeof window.ReactDOM.render&&"function"!=typeof window.ReactDOM.createRoot&&t.push("ReactDOM.render or createRoot is not available. Please ensure you are using a compatible React version.")):t.push("Window object not available. Widget must run in a browser environment.");return{isValid:0===a.length&&0===t.length,errors:[...t,...a.map(e=>`Missing required attribute: ${e}`)],missingRequired:a}}extractWidgetConfig(e){const n={};return Array.from(e.attributes).forEach(e=>{if(e.name.startsWith("data-")){const t=e.name.replace("data-","");n[t]=e.value}}),n}getDefaultStyles(){return"\n      .instashow-widget-container {\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n        font-size: 14px;\n        line-height: 1.5;\n        color: #333;\n        box-sizing: border-box;\n        * { box-sizing: border-box; }\n      }\n\n      .instashow-widget-error {\n        padding: 20px;\n        background: #fef2f2;\n        border: 1px solid #fecaca;\n        border-radius: 8px;\n        text-align: center;\n        max-width: 400px;\n        margin: 20px auto;\n      }\n\n      .error-icon {\n        font-size: 32px;\n        margin-bottom: 10px;\n      }\n\n      .error-title {\n        font-weight: 600;\n        color: #dc2626;\n        margin-bottom: 10px;\n      }\n\n      .error-message {\n        color: #7f1d1d;\n        margin-bottom: 15px;\n        white-space: pre-line;\n        font-family: monospace;\n        font-size: 12px;\n      }\n\n      .error-help {\n        color: #6b7280;\n        font-size: 12px;\n      }\n\n      .instashow-scheduler-widget {\n        background: white;\n        border: 1px solid #e5e7eb;\n        border-radius: 12px;\n        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n        overflow: hidden;\n        max-width: 500px;\n        margin: 20px auto;\n      }\n\n      .widget-header {\n        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n        color: white;\n        padding: 20px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n\n      .widget-title {\n        font-size: 18px;\n        font-weight: 600;\n      }\n\n      .widget-status {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-size: 14px;\n      }\n\n      .status-indicator {\n        width: 8px;\n        height: 8px;\n        border-radius: 50%;\n        background: #10b981;\n      }\n\n      .status-indicator.active {\n        background: #10b981;\n      }\n\n      .widget-body {\n        padding: 20px;\n      }\n\n      .config-section h4 {\n        margin: 0 0 15px 0;\n        color: #374151;\n        font-size: 16px;\n      }\n\n      .config-grid {\n        display: grid;\n        gap: 10px;\n        margin-bottom: 20px;\n      }\n\n      .config-item {\n        display: flex;\n        justify-content: space-between;\n        padding: 8px 12px;\n        background: #f9fafb;\n        border-radius: 6px;\n        border: 1px solid #e5e7eb;\n      }\n\n      .config-key {\n        font-weight: 500;\n        color: #6b7280;\n      }\n\n      .config-value {\n        color: #374151;\n        font-family: monospace;\n        background: #f3f4f6;\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-size: 12px;\n      }\n\n      .widget-actions {\n        display: flex;\n        gap: 10px;\n        margin-bottom: 20px;\n      }\n\n      .action-button {\n        padding: 10px 16px;\n        border: none;\n        border-radius: 6px;\n        font-size: 14px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: all 0.2s;\n      }\n\n      .action-button.primary {\n        background: #3b82f6;\n        color: white;\n      }\n\n      .action-button.primary:hover {\n        background: #2563eb;\n      }\n\n      .action-button.secondary {\n        background: #f3f4f6;\n        color: #374151;\n        border: 1px solid #d1d5db;\n      }\n\n      .action-button.secondary:hover {\n        background: #e5e7eb;\n      }\n\n      .action-button.loading {\n        opacity: 0.7;\n        cursor: not-allowed;\n      }\n\n      .action-button.loading::after {\n        content: '';\n        display: inline-block;\n        width: 12px;\n        height: 12px;\n        margin-left: 8px;\n        border: 2px solid transparent;\n        border-top: 2px solid currentColor;\n        border-radius: 50%;\n        animation: spin 1s linear infinite;\n      }\n\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n\n      .expanded-content {\n        border-top: 1px solid #e5e7eb;\n        padding-top: 20px;\n        margin-top: 20px;\n      }\n\n      .info-box, .debug-info {\n        background: #f9fafb;\n        border: 1px solid #e5e7eb;\n        border-radius: 6px;\n        padding: 15px;\n        margin-bottom: 15px;\n      }\n\n      .info-box h5, .debug-info h5 {\n        margin: 0 0 10px 0;\n        color: #374151;\n        font-size: 14px;\n      }\n\n      .info-box p, .debug-info p {\n        margin: 0 0 8px 0;\n        color: #6b7280;\n        font-size: 13px;\n        line-height: 1.4;\n      }\n\n      .debug-info p:last-child {\n        margin-bottom: 0;\n      }\n\n      .user-status-section {\n        margin-bottom: 20px;\n      }\n\n      .user-status-section .info-box {\n        border-left: 4px solid #3b82f6;\n      }\n\n      .user-status-section .info-box p {\n        margin-bottom: 6px;\n      }\n\n      .user-status-section .info-box p:last-child {\n        margin-bottom: 0;\n      }\n\n      .agent-contact-box {\n        border-left: 4px solid #3b82f6;\n      }\n\n      .agent-contact-box .agent-header {\n        border-bottom: 1px solid #e5e7eb;\n        padding-bottom: 15px;\n      }\n\n      .agent-contact-box .contact-methods {\n        padding-top: 10px;\n      }\n\n      .agent-contact-box .contact-methods > div {\n        padding: 8px 0;\n        border-bottom: 1px solid #f3f4f6;\n      }\n\n      .agent-contact-box .contact-methods > div:last-child {\n        border-bottom: none;\n      }\n\n      .property-info-box {\n        border-left: 4px solid #10b981;\n      }\n\n      .property-info-box .property-header {\n        border-bottom: 1px solid #e5e7eb;\n        padding-bottom: 15px;\n      }\n\n      .property-info-box .property-actions {\n        padding-top: 10px;\n      }\n\n      .property-info-box button:hover {\n        transform: translateY(-1px);\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        transition: all 0.2s ease;\n      }\n\n      /* New Widget States CSS */\n      .widget-loading-state {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        padding: 2rem;\n        text-align: center;\n      }\n\n      .loading-spinner {\n        position: relative;\n        width: 60px;\n        height: 60px;\n        margin-bottom: 1rem;\n      }\n\n      .spinner-ring {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        border: 4px solid #f3f4f6;\n        border-top: 4px solid #3b82f6;\n        border-radius: 50%;\n        animation: spin 1s linear infinite;\n      }\n\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n\n      .loading-text {\n        color: #6b7280;\n        font-size: 0.875rem;\n        margin: 0;\n      }\n\n      .availability-loading {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        padding: 2rem;\n        text-align: center;\n        width: 100%;\n      }\n\n      .widget-error-state {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        padding: 2rem;\n        text-align: center;\n        background: #fef2f2;\n        border: 1px solid #fecaca;\n        border-radius: 0.75rem;\n      }\n\n      .error-icon {\n        font-size: 2rem;\n        margin-bottom: 1rem;\n      }\n\n      .error-title {\n        color: #dc2626;\n        font-size: 1.125rem;\n        font-weight: 600;\n        margin: 0 0 0.5rem 0;\n      }\n\n      .error-message {\n        color: #7f1d1d;\n        font-size: 0.875rem;\n        margin: 0 0 1rem 0;\n        line-height: 1.5;\n      }\n\n      .error-retry-button {\n        background: #dc2626;\n        color: white;\n        border: none;\n        padding: 0.5rem 1rem;\n        border-radius: 0.5rem;\n        font-size: 0.875rem;\n        font-weight: 500;\n        cursor: pointer;\n        transition: background-color 0.2s ease;\n      }\n\n      .error-retry-button:hover {\n        background: #b91c1c;\n      }\n\n      .widget-state {\n        border-radius: 0.75rem;\n        overflow: hidden;\n        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n        border: 1px solid #E3E3E3;\n      }\n\n      .state-header {\n        padding: 0.75rem 1.5rem;\n        display: flex;\n        align-items: center;\n        gap: 0.75rem;\n        color: white;\n      }\n\n      .state-header.awaiting {\n        background: #6b7280;\n      }\n\n      .state-header.confirmed {\n        background: #10b981;\n      }\n\n      .state-header.schedule {\n        background: #3A307F;\n      }\n\n      .header-icon {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .header-icon svg {\n        width: 24px;\n        height: 24px;\n        color: white;\n      }\n\n      .state-title {\n        font-size: 1.125rem;\n        font-weight: 600;\n        margin: 0;\n        color: white;\n      }\n\n      .state-body {\n        padding: 1.25rem;\n        background: white;\n      }\n\n      .schedule-visit .state-body {\n        background: #F7F7FC;\n      }\n\n      .state-message {\n        color: #374151;\n        font-size: 0.875rem;\n        line-height: 1.5;\n        margin: 0;\n        text-align: center;\n      }\n\n      .appointment-details {\n        display: flex;\n        flex-direction: column;\n        gap: 1rem;\n      }\n\n      .detail-row {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 1rem;\n      }\n\n      .detail-column {\n        display: flex;\n        flex-direction: column;\n        gap: 0.25rem;\n      }\n\n      .detail-label {\n        font-size: 0.75rem;\n        font-weight: 600;\n        color: #6b7280;\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n      }\n\n      .detail-value {\n        font-size: 0.875rem;\n        font-weight: 500;\n        color: #374151;\n      }\n\n      .date-cards {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr;\n        gap: 0.75rem;\n        margin-bottom: 1rem;\n      }\n\n      .date-card {\n        border: 1px solid #3A307F;\n        border-radius: 0.5rem;\n        padding: 0.75rem;\n        text-align: center;\n        transition: all 0.2s ease;\n        cursor: pointer;\n        background: #FFFFFF;\n      }\n\n      .date-card:hover {\n        transform: translateY(-2px);\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n      }\n\n      .date-card.today {\n        border-color: #7c3aed;\n        background: #faf5ff;\n      }\n\n      .date-day {\n        font-size: 1rem;\n        font-weight: 600;\n        color: #3A307F;\n        margin-bottom: 0.25rem;\n        background: #F0EFF5;\n        padding: 0.25rem 0.5rem;\n        border-radius: 0.5rem 0.5rem 0 0;\n        text-align: center;\n        margin: -0.75rem -0.75rem 0.5rem -0.75rem;\n        border-bottom: 1px solid #e5e7eb;\n      }\n\n      .date-number {\n        font-size: 1.5rem;\n        font-weight: 700;\n        color: #3A307F;\n        margin-bottom: 0.25rem;\n      }\n\n      .date-month {\n        font-size: 0.75rem;\n        font-weight: 500;\n        color: #3A307F;\n      }\n\n      /* Skeleton loading styles */\n      .date-card.skeleton {\n        pointer-events: none;\n      }\n\n      .skeleton-line {\n        background: #e5e7eb;\n        border-radius: 0.25rem;\n        animation: pulse 1.5s ease-in-out infinite;\n      }\n\n      .skeleton-line.day-line {\n        width: 2rem;\n        height: 0.75rem;\n        margin: 0 auto;\n      }\n\n      .skeleton-line.number-line {\n        width: 2.5rem;\n        height: 1.5rem;\n        margin: 0 auto;\n      }\n\n      .skeleton-line.month-line {\n        width: 3rem;\n        height: 0.75rem;\n        margin: 0 auto;\n      }\n\n      @keyframes pulse {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.5; }\n      }\n\n      .view-all-dates-button {\n        width: 100%;\n        background: #FFFFFF;\n        color: #3A307F;\n        border: none;\n        padding: 0.5rem 1rem;\n        border-radius: 0.5rem;\n        font-size: 0.875rem;\n        font-weight: 500;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 0.5rem;\n        transition: all 0.2s ease;\n      }\n\n      .view-all-dates-button:hover {\n        border-color: #7c3aed;\n      }\n\n      .view-all-dates-button svg {\n        color: #7c3aed;\n      }\n\n      .state-footer {\n        padding: 0.5rem 1.5rem;\n        background: #ffffff;\n        border-top: 1px solid #e5e7eb;\n        color: #333333;\n      }\n\n      .footer-action {\n        width: 100%;\n        background: transparent;\n        color: #6b7280;\n        border: none;\n        padding: 0.5rem;\n        font-size: 0.875rem;\n        font-weight: 500;\n        cursor: pointer;\n        text-align: center;\n        transition: color 0.2s ease;\n      }\n\n      .footer-action:hover {\n        color: #374151;\n      }\n\n      /* Modal Overlay Styles */\n      .modal-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.5);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 1000;\n        padding: 1rem;\n      }\n\n      .modal-content {\n        background: white;\n        border-radius: 0.75rem;\n        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);\n        max-width: 95vw;\n        max-height: 90vh;\n        overflow: hidden;\n        position: relative;\n        width: 100%;\n        max-width: 1000px;\n      }\n\n      .modal-close-button {\n        position: absolute;\n        top: 1rem;\n        right: 1rem;\n        background: none;\n        border: none;\n        font-size: 1.5rem;\n        cursor: pointer;\n        color: #6b7280;\n        width: 2rem;\n        height: 2rem;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 0.5rem;\n        transition: all 0.2s ease;\n        z-index: 10;\n      }\n\n      .modal-close-button:hover {\n        background: #f3f4f6;\n        color: #374151;\n      }\n\n      .modal-body {\n        overflow-y: auto;\n        max-height: calc(90vh - 4rem);\n      }\n\n      /* Responsive adjustments */\n      @media (max-width: 640px) {\n        .date-cards {\n          grid-template-columns: 1fr;\n          gap: 0.5rem;\n        }\n        \n        .detail-row {\n          grid-template-columns: 1fr;\n          gap: 0.75rem;\n        }\n\n        .modal-content {\n          max-width: 95vw;\n          margin: 0.5rem;\n        }\n\n        .modal-body {\n          padding: 1.5rem;\n        }\n      }\n\n      /* Calendar Styles */\n      .calendar {\n        background: white;\n        border-radius: 0.5rem;\n        padding: 1.5rem;\n      }\n\n      .calendar-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        margin-bottom: 0.75rem;\n      }\n\n      .calendar-nav-button {\n        background: none;\n        border: none;\n        font-size: 1.25rem;\n        cursor: pointer;\n        color: #6b7280;\n        width: 1.75rem;\n        height: 1.75rem;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 0.5rem;\n        transition: all 0.2s ease;\n      }\n\n      .calendar-nav-button:hover {\n        background: #f3f4f6;\n        color: #374151;\n      }\n\n      .calendar-month-year {\n        font-size: 1.125rem;\n        font-weight: 600;\n        color: #374151;\n      }\n\n      .calendar-days-header {\n        display: grid;\n        grid-template-columns: repeat(7, 1fr);\n        gap: 0.125rem;\n        margin-bottom: 0.5rem;\n      }\n\n      .calendar-day-header {\n        text-align: center;\n        font-size: 0.75rem;\n        font-weight: 600;\n        color: #6b7280;\n        padding: 0.375rem;\n      }\n\n      .calendar-grid {\n        display: grid;\n        grid-template-columns: repeat(7, 1fr);\n        gap: 0.0625rem;\n      }\n\n      .calendar-day {\n        aspect-ratio: 1;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 0.7rem;\n        font-weight: 500;\n        cursor: pointer;\n        border-radius: 0.25rem;\n        transition: all 0.2s ease;\n        border: 1px solid transparent;\n        min-height: 28px;\n      }\n\n      .calendar-day.empty {\n        cursor: default;\n      }\n\n      .calendar-day.available {\n        color: #374151;\n        background: #f9fafb;\n      }\n\n      .calendar-day.available:hover {\n        background: #e5e7eb;\n      }\n\n      .calendar-day.selected {\n        background: #3A307F;\n        color: white;\n        border-color: #3A307F;\n      }\n\n      .calendar-day.today {\n        border-color: #3A307F;\n        font-weight: 600;\n      }\n\n      .calendar-day.unavailable {\n        color: #9ca3af;\n        cursor: not-allowed;\n      }\n\n      /* Time Slot Selector Styles */\n      .time-slot-selector {\n        background: white;\n        border-radius: 0.5rem;\n        padding: 1.5rem;\n        min-width: 0;\n      }\n\n      .time-slot-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-start;\n        margin-bottom: 1.5rem;\n      }\n\n      .time-slot-header h3 {\n        margin: 0;\n        color: #374151;\n        font-size: 1.125rem;\n        flex: 1;\n      }\n\n      .available-count {\n        color: #6b7280;\n        font-size: 0.875rem;\n        text-align: right;\n        flex-shrink: 0;\n        margin-left: 1rem;\n      }\n\n      .time-axis {\n        display: grid;\n        grid-template-columns: repeat(24, 1fr);\n        margin-bottom: 1rem;\n        height: 1.5rem;\n        font-size: 0.75rem;\n        color: #6b7280;\n        position: relative;\n      }\n\n      .time-marker {\n        grid-column: span 1;\n        text-align: center;\n        white-space: nowrap;\n        font-weight: 500;\n      }\n\n      .time-marker:nth-child(1) {\n        grid-column: 1;\n      }\n\n      .time-marker:nth-child(2) {\n        grid-column: 7;\n      }\n\n      .time-marker:nth-child(3) {\n        grid-column: 13;\n      }\n\n      .time-marker:nth-child(4) {\n        grid-column: 19;\n      }\n\n      .time-marker:nth-child(5) {\n        grid-column: 24;\n      }\n\n      .timeline {\n        display: grid;\n        grid-template-columns: repeat(24, 1fr);\n        gap: 1px;\n        margin-bottom: 1rem;\n        background: #e5e7eb;\n        border-radius: 0.25rem;\n        overflow: hidden;\n        position: relative;\n      }\n\n      .time-slot-segment {\n        height: 2.5rem;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        position: relative;\n        border-right: 1px solid #e5e7eb;\n      }\n\n      .time-slot-segment:last-child {\n        border-right: none;\n      }\n\n      .time-slot-segment.available {\n        background: #10b981;\n      }\n\n      .time-slot-segment.available:hover {\n        background: #059669;\n      }\n\n      .time-slot-segment.selected {\n        background: #3b82f6;\n      }\n\n      .time-slot-segment.unavailable {\n        background: #d1d5db;\n        cursor: not-allowed;\n      }\n\n      .time-slot-instructions {\n        text-align: center;\n        color: #6b7280;\n        font-size: 0.875rem;\n        margin: 1rem 0;\n      }\n\n      .time-slot-legend {\n        display: flex;\n        gap: 1rem;\n        justify-content: left;\n        margin-bottom: 1.5rem;\n      }\n\n      .legend-item {\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n        font-size: 0.875rem;\n        color: #6b7280;\n      }\n\n      .legend-dot {\n        width: 0.75rem;\n        height: 0.75rem;\n        border-radius: 50%;\n      }\n\n      .legend-dot.available {\n        background: #10b981;\n      }\n\n      .legend-dot.unavailable {\n        background: #d1d5db;\n      }\n\n      .selected-time-slot {\n        border-top: 1px solid #e5e7eb;\n        padding-top: 1rem;\n      }\n\n      .selected-time-slot h4 {\n        margin: 0 0 0.75rem 0;\n        color: #374151;\n        font-size: 1rem;\n      }\n\n      .selected-slot-display {\n        display: inline-flex;\n        align-items: center;\n        gap: 0.75rem;\n        background: #F0EFF5;\n        padding: 0.25rem 0.75rem;\n        border-radius: 9999px;\n        margin-right: 0.75rem;\n        margin-bottom: 0.75rem;\n      }\n\n      .clock-icon {\n        color: #3A307F;\n        width: 16px;\n        height: 16px;\n        flex-shrink: 0;\n      }\n\n      .remove-slot-button {\n        background: none;\n        border: none;\n        color: #3A307F;\n        cursor: pointer;\n        font-size: 1rem;\n        width: 1.25rem;\n        height: 1.25rem;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 0.25rem;\n        transition: all 0.2s ease;\n      }\n\n      .remove-slot-button:hover {\n        background: rgba(58, 48, 127, 0.1);\n        color: #2D1F5B;\n      }\n\n      .selected-slots-container {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 0.75rem;\n        margin-bottom: 1rem;\n      }\n\n      /* Step Navigation */\n      .step-navigation {\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n        gap: 1rem;\n        padding: 1rem 2rem 1rem 2rem;\n        border-top: 1px solid #e5e7eb;\n      }\n\n      .step-button {\n        padding: 0.75rem 1.5rem;\n        border-radius: 0.5rem;\n        font-size: 0.875rem;\n        font-weight: 500;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        border: 1px solid;\n      }\n\n      .step-button.back {\n        background: white;\n        color: #3A307F;\n        border-color: #d1d5db;\n      }\n\n      .step-button.back:hover {\n        background: #f9fafb;\n        border-color: #9ca3af;\n      }\n\n      .step-button.next {\n        background: #3A307F;\n        color: white;\n        border-color: #3A307F;\n      }\n\n      .step-button.next:hover {\n        background: #2d2463;\n      }\n\n      .step-button:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n\n      /* Step Layout Styles */\n      .modal-title {\n        margin: 0 0 0.5rem 0;\n        color: #374151;\n        font-size: 1.5rem;\n        font-weight: 600;\n        padding: 1.5rem 1.5rem 0 2rem;\n      }\n\n      .modal-subtitle {\n        margin: 0;\n        color: #6b7280;\n        font-size: 1rem;\n        line-height: 1.5;\n        padding: 0 2rem 1rem 2rem;\n        border-bottom: 1px solid #e3e3e3;\n      }\n\n      /* Step 2 specific styles - centered title and subtitle */\n      .step2-title {\n        margin: 0 0 0.5rem 0;\n        color: #3A307F;\n        font-size: 1.5rem;\n        font-weight: 600;\n        padding: 1.5rem 2rem 0 2rem;\n        text-align: center;\n      }\n\n      .step2-subtitle {\n        margin: 0;\n        color: #6b7280;\n        font-size: 1rem;\n        line-height: 1.5;\n        padding: 0 2rem 1rem 2rem;\n        text-align: center;\n      }\n\n      .step1-content {\n        display: grid;\n        grid-template-columns: 0.7fr 1.3fr;\n      }\n\n      .step1-left, .step1-right {\n        min-height: 400px;\n      }\n\n      .step1-left {\n        position: relative;\n      }\n\n      .step1-left::after {\n        content: '';\n        position: absolute;\n        right: 0;\n        top: 0;\n        bottom: 0;\n        width: 1px;\n        background-color: #e3e3e3;\n      }\n\n      .no-date-selected {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        color: #6b7280;\n        font-style: italic;\n      }\n\n      .appointment-summary {\n        background: #f9fafb;\n        padding: 1.5rem;\n        border-radius: 0.5rem;\n        margin: 0 2rem 2rem 2rem;\n        border: 1px solid #e5e7eb;\n      }\n\n      .appointment-summary p {\n        margin: 0.5rem 0;\n        color: #374151;\n        font-size: 0.875rem;\n      }\n\n      .contact-form-placeholder {\n        text-align: center;\n        padding: 2rem;\n        color: #6b7280;\n        font-style: italic;\n        background: #f9fafb;\n        border-radius: 0.5rem;\n        border: 1px solid #e5e7eb;\n        margin: 0 2rem 2rem 2rem;\n      }\n\n      .step2-content {\n        padding: 0 2rem 2rem 2rem;\n      }\n\n      /* Contact Form Styles */\n      .contact-form {\n        max-width: 100%;\n        padding: 2rem;\n      }\n\n      .form-group {\n        margin-bottom: 1.5rem;\n      }\n\n      .form-label {\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n        margin-bottom: 0.5rem;\n        font-weight: 600;\n        color: #374151;\n        font-size: 0.875rem;\n      }\n\n      .form-helper {\n        font-size: 0.75rem;\n        color: #6b7280;\n        font-weight: 400;\n      }\n\n      .form-input {\n        position: relative;\n        width: 100%;\n      }\n\n      .form-input input {\n        width: 100%;\n        padding: 0.75rem 0.75rem 0.75rem 2.5rem;\n        border: 1px solid #d1d5db;\n        border-radius: 0.5rem;\n        font-size: 0.875rem;\n        color: #374151;\n        background: white;\n        transition: all 0.2s ease;\n      }\n\n      .form-input input:focus {\n        outline: none;\n        border-color: #3A307F;\n        box-shadow: 0 0 0 3px rgba(58, 48, 127, 0.1);\n      }\n\n      .form-input input::placeholder {\n        color: #9ca3af;\n      }\n\n      .form-input input.error {\n        border-color: #dc2626;\n        color: #dc2626;\n      }\n\n      .form-input input.error:focus {\n        border-color: #dc2626;\n        box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);\n      }\n\n      .form-error {\n        color: #dc2626;\n        font-size: 0.875rem;\n        margin-top: 0.5rem;\n        display: flex;\n        align-items: center;\n        gap: 0.25rem;\n      }\n\n      .form-error::before {\n        content: '⚠';\n        font-size: 0.75rem;\n      }\n\n      .api-error-message {\n        background: #fef2f2;\n        border: 1px solid #fecaca;\n        border-radius: 0.5rem;\n        padding: 0.75rem;\n        margin-bottom: 1rem;\n        color: #dc2626;\n        font-size: 0.875rem;\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n      }\n\n      .api-error-message::before {\n        content: '⚠';\n        font-size: 1rem;\n        flex-shrink: 0;\n      }\n\n      .existing-appointment-message {\n        background: #f0f9ff;\n        border: 1px solid #bae6fd;\n        border-radius: 0.5rem;\n        padding: 1rem;\n        margin-bottom: 1rem;\n      }\n\n      .existing-appointment-message h4 {\n        color: #0369a1;\n        font-size: 1rem;\n        font-weight: 600;\n        margin: 0 0 0.5rem 0;\n      }\n\n      .existing-appointment-message p {\n        color: #0369a1;\n        font-size: 0.875rem;\n        margin: 0 0 0.75rem 0;\n      }\n\n      .existing-appointment-message .appointment-details {\n        display: flex;\n        flex-direction: column;\n        gap: 0.5rem;\n      }\n\n      .existing-appointment-message .detail-item {\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n        font-size: 0.875rem;\n      }\n\n      .existing-appointment-message .detail-item span:first-child {\n        color: #0369a1;\n        font-weight: 500;\n      }\n\n      .existing-appointment-message .detail-item span:last-child {\n        color: #0c4a6e;\n        font-weight: 600;\n      }\n\n      .form-input-icon {\n        position: absolute;\n        left: 0.75rem;\n        top: 50%;\n        transform: translateY(-50%);\n        width: 16px;\n        height: 16px;\n        color: #9ca3af;\n        pointer-events: none;\n      }\n\n      .security-notice {\n        background: #f9fafb;\n        border: 1px solid #e5e7eb;\n        border-radius: 0.5rem;\n        padding: 0.75rem;\n        margin-bottom: 1.5rem;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 0.75rem;\n        text-align: center;\n      }\n\n      .security-icon {\n        width: 16px;\n        height: 16px;\n        color: #6b7280;\n        flex-shrink: 0;\n      }\n\n      .security-text {\n        font-size: 0.75rem;\n        color: #6b7280;\n        line-height: 1.4;\n      }\n\n      .info-section {\n        margin-bottom: 1.5rem;\n      }\n\n      .info-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        margin-bottom: 1rem;\n        cursor: pointer;\n      }\n\n      .info-title {\n        font-weight: 600;\n        color: #374151;\n        font-size: 0.875rem;\n        margin: 0;\n      }\n\n      .info-toggle {\n        width: 16px;\n        height: 16px;\n        color: #6b7280;\n        transition: transform 0.2s ease;\n      }\n\n      .info-toggle.expanded {\n        transform: rotate(180deg);\n      }\n\n      .info-content {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 0.75rem;\n      }\n\n      .info-item {\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n        font-size: 0.75rem;\n        color: #374151;\n      }\n\n      .info-check {\n        width: 12px;\n        height: 12px;\n        color: #10b981;\n        flex-shrink: 0;\n      }\n\n      /* Responsive Design */\n      @media (max-width: 768px) {\n        .modal-content {\n          max-width: 95vw;\n          margin: 0.5rem;\n        }\n\n        .modal-title {\n          padding: 1.5rem 1rem 0 1rem !important;\n        }\n\n        .modal-subtitle {\n          padding: 0 1rem 0.5rem 1rem !important;\n        }\n\n        .step1-content {\n          padding: 0 1rem 1rem 1rem !important;\n        }\n\n        .step2-content {\n          padding: 0 1rem 1rem 1rem !important;\n        }\n\n        .step-navigation {\n          padding: 0.75rem 1rem 0.75rem 1rem !important;\n          gap: 0.75rem;\n        }\n\n        .appointment-summary, .contact-form-placeholder {\n          margin: 0 1rem 1rem 1rem !important;\n        }\n\n        .info-content {\n          grid-template-columns: 1fr;\n        }\n\n        .calendar {\n          padding: 0.5rem;\n        }\n\n        .time-slot-selector {\n          padding: 1rem;\n        }\n\n        .calendar-grid {\n          gap: 0.125rem;\n        }\n\n        .calendar-day {\n          font-size: 0.7rem;\n          min-height: 24px;\n        }\n\n        .calendar-day-header {\n          font-size: 0.7rem;\n          padding: 0.25rem;\n        }\n\n        .time-slot-header {\n          flex-direction: column;\n          gap: 0.5rem;\n          align-items: flex-start;\n        }\n\n        .available-count {\n          margin-left: 0;\n          margin-top: 0.5rem;\n        }\n\n        .time-slot-legend {\n          flex-direction: column;\n          gap: 0.5rem;\n        }\n\n        .step1-content {\n          grid-template-columns: 1fr;\n          gap: 1.5rem;\n        }\n\n        .step1-left::after {\n          display: none;\n        }\n\n        .modal-content {\n          max-width: 98vw;\n        }\n\n        .step1-left, .step1-right {\n          min-height: auto;\n        }\n\n        .modal-title {\n          font-size: 1.25rem;\n        }\n\n        .modal-subtitle {\n          font-size: 0.875rem;\n        }\n      }\n    "}destroy(){this.widgets.forEach((e,n)=>{try{const n=this.getReactDOM();e.root&&"function"==typeof e.root.unmount?e.root.unmount():"function"==typeof n.unmountComponentAtNode&&n.unmountComponentAtNode(e.container)}catch(t){console.error("Error destroying widget:",t)}}),this.widgets.clear(),this.initialized=!1}}function g(){return{api:{baseURL:u(),timeout:3e4,retryAttempts:3},widget:{cacheTimeout:3e5,maxRetries:3,loadingDelay:300},environment:{isDevelopment:!1,isProduction:!0,mode:"production",envFile:p()}}}function u(){return"https://api.instashow.com"}function p(){return".env.production"}const h=function(){const e=g(),n=[];return e.api.baseURL||n.push("Backend API base URL is not configured"),e.api.baseURL.startsWith("http")||n.push("Backend API base URL must be a valid HTTP/HTTPS URL"),{isValid:0===n.length,errors:n,config:e}}();h.isValid||console.error("❌ Widget configuration validation failed:",h.errors),function(){const e=g();console.log("🔧 Widget Configuration (Production):",e)}();const f=new m;f.init().catch(e=>{console.error("Failed to initialize InstaShow Widget Manager:",e)}),"undefined"!=typeof window&&(window.InstaShowWidget={manager:f,init:()=>f.init(),destroy:()=>f.destroy(),version:"1.0.0",getSupportedTypes:()=>{var e;return(null==(e=f.getSupportedWidgetTypes)?void 0:e.call(f))||[]},initializeWidget:e=>f.initializeWidget(e),config:h.config}),e.WidgetManager=m,e.default=f,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}(this.InstaShowWidget=this.InstaShowWidget||{});
